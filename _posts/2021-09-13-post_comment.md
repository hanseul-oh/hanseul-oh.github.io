---
title: 강화학습을 트레이딩에 적용
excerpt: 한국 주식시장에서 몇몇 종목에 대해 강화학습을 적용시켜 트레이딩을 해보자

categories:
  - Reinforcement Learning
tags:
  - [Reinforcement Learning, Stock]

toc: ture
toc_stcky: true
---

먼저 주식데이터를 가져와야한다.
필자는 따로 DB를 만들어 놓았기 때문에 DB에서 데이터를 읽어온다.

강화학습을 적용하기 위해서 
원하는 수익률이 

얼마만큼 매수/매도할 것인가

임의로 매수/매도를 설정하면 분봉에서

강화학습은 초기에 학습데이터를 탐험(exploration)을 통해 만들어낸다. 
policy냐 초기 랜덤 확률로 행동(정책)을 선택하고
value는 랜덤으로 행동을 선택

따라 policy
value는 

강화학습을 통해서 매 시점마다 행동을 결정하는데

학습데이터에 주가데이터만 있고 현재 얼마나 주식을 보유하고 있는지 정보가 없다면 
현재 주식을 얼마나 보유했는지에 따라 주가가 변하며 미래가치 또한 변하게 되는데 이 부분을 반영하지 못한다.
예를 들어, 주식을 얼마나 보유했는지 정보가 없으면 주가데이터는 동일해서 동일한 input값이 모델에 들어갔는데 
output값이 다르게 나오니까 이 데이터를 학습시키는 과정에서 모형의 업데이트가 이상하게 되겠지
주식가치만 들어가면 되지 않을까? 주식보유비율이랑 포트폴리오 가치비율을 넣었는데 주식 가치 값만 넣어줘도
이 2가지를 반영할 수 있을텐데? 주식가치만 input에 추가했을 때, 놓치는 부분이 있나?
총 자산이 들어가지 않으면 보유 주식숫자가 동일해서 주식가치는 동일한데 총 자산이 달라서 처음 총자산대비
전체 자산에서 산출되는 수익률이 달라지지

주식가치를 input으로 사용할 것인가 아니면 주식비율을 input으로 사용할 것인가?
주식가치를 input으로 사용하면 scaling 하는 부분에 있어서 약간의 부족함(기준값을 어떻게 설정하는가에 따라 다르지만
값을 하나로 지정한다면 기준 값의 시점과 멀어지면 멀어질수록 값에서 큰 차이가 발생할 때, scaling한 값 또한 기존 범위를 크게 벗어날 것)
주식비율을 input으로 사용하면 input값의 범위는 0~1사이 값으로 일정한 범위안에 있는데 보유 주식의 총 가치값이 달라져도 총 자산에 비교한다면
동일한 비율 값을 가질 수 있음





책에서는 주식 보유 비율과, 포트폴리오 가치 비율을 학습 데이터에 추가했는데
주식 보유 비율은 주식을 얼마나 보유했는지에 따라 손익이 달라지니까 넣어주는데
주식 보유 비율은 항상 0~1이고
포트폴리오 가치 비율은 처음 포트폴리오 가치 대비 얼마나 변했는가-> 손익이 얼마인가인데
손익이 얼마인지에 따라 만약에 pv가 작은 값을 가
pv 값의 범위는 



포트폴리오 가치 비율



      
      
